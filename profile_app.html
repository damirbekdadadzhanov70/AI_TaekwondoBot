<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è Taekwondo AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ */
        body {
            /* –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Telegram –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ–º */
            background-color: var(--tg-theme-bg-color, #fff);
            color: var(--tg-theme-text-color, #000);
            /* –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç –¥–ª—è –ª—É—á—à–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ */
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            padding: 20px;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: 15px;
            /* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤—ã—Å–æ—Ç—É –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏ */
            min-height: 100vh;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        label {
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--tg-theme-hint-color, #aaa);
            font-size: 14px;
        }
        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π –≤–≤–æ–¥–∞ */
        input[type="number"] {
            padding: 10px;
            border: 1px solid var(--tg-theme-secondary-bg-color, #eee);
            border-radius: 8px;
            background-color: var(--tg-theme-secondary-bg-color, #f4f4f5);
            color: var(--tg-theme-text-color, #000);
            font-size: 16px;
            transition: border-color 0.2s;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: var(--tg-theme-button-color, #007aff);
        }
    </style>
</head>
<body>
    <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞</h1>

    <div class="form-group">
        <label for="age">–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç):</label>
        <input type="number" id="age" name="age" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 15" min="4" required>
    </div>

    <div class="form-group">
        <label for="height">–†–æ—Å—Ç (—Å–º):</label>
        <input type="number" id="height" name="height" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 175" min="80" required>
    </div>

    <div class="form-group">
        <label for="weight">–í–µ—Å (–∫–≥, –º–æ–∂–Ω–æ —Å —Ç–æ—á–∫–æ–π/–∑–∞–ø—è—Ç–æ–π):</label>
        <input type="number" id="weight" name="weight" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 65.5" min="15" step="0.1" pattern="[0-9]*[.,]?[0-9]+" required>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mini App
        Telegram.WebApp.ready();

        const mainButton = Telegram.WebApp.MainButton;

        function validateAndSend() {
            // –°—á–∏—Ç—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π
            const age = document.getElementById('age').value.trim();
            const height = document.getElementById('height').value.trim();
            const weight = document.getElementById('weight').value.trim();

            if (!age || !height || !weight) {
                Telegram.WebApp.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            // --- –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö ---

            // –ó–∞–º–µ–Ω—è–µ–º –∑–∞–ø—è—Ç—É—é –Ω–∞ —Ç–æ—á–∫—É –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥—Ä–æ–±–Ω–æ–≥–æ —á–∏—Å–ª–∞
            const sanitizedWeight = weight.replace(',', '.');

            const data = {
                // parseInt –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤–æ–∑—Ä–∞—Å—Ç –∏ —Ä–æ—Å—Ç –≤ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞
                age: parseInt(age),
                height: parseInt(height),
                // parseFloat –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤–µ—Å –≤ –¥—Ä–æ–±–Ω–æ–µ —á–∏—Å–ª–æ
                weight: parseFloat(sanitizedWeight)
            };

            // --- –í–∞–ª–∏–¥–∞—Ü–∏—è ---

            // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ –≤–µ—Ä–Ω—É–ª NaN –∏ —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ä–∞–∑—É–º–Ω–æ–≥–æ
            if (isNaN(data.age) || isNaN(data.height) || isNaN(data.weight) ||
                data.age < 4 || data.height < 80 || data.weight < 15) {

                Telegram.WebApp.showAlert('–í–≤–µ–¥–µ–Ω—ã –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è! –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —á–∏—Å–ª–∞.');
                return;
            }

            // --- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö ---

            // üí° –í–ê–ñ–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –î–õ–Ø –û–¢–õ–ê–î–ö–ò (–±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞!)
            console.log("Mini App: –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –±–æ—Ç—É:", data);

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            mainButton.showProgress(true);

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º JSON-—Å—Ç—Ä–æ–∫—É —Å –¥–∞–Ω–Ω—ã–º–∏ –±–æ—Ç—É
            Telegram.WebApp.sendData(JSON.stringify(data));

            // –ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∂–¥–µ—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –±–æ—Ç–∞ (–æ—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ)
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–∞–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ Telegram
        mainButton.setText("–°–û–•–†–ê–ù–ò–¢–¨ –ü–†–û–§–ò–õ–¨");
        mainButton.onClick(validateAndSend);
        mainButton.show();
    </script>
</body>
</html>